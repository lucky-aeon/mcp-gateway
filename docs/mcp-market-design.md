# MCP Market 产品设计文档

## 📋 产品概述

### 产品愿景
将 MCP Gateway 从基础设施工具升级为完整的 MCP 生态平台，通过引入 MCP 市场概念，让用户能够轻松发现、安装和管理 MCP 服务器。

### 核心价值
- **发现性**：解决用户难以找到优质 MCP 服务器的痛点
- **易用性**：一键安装，降低部署和配置门槛
- **生态建设**：促进 MCP 社区发展和服务器质量提升

## 🎯 目标用户

### 主要用户群体
1. **AI应用开发者** - 需要快速集成多种 MCP 工具
2. **企业用户** - 希望可视化管理 MCP 服务集合  
3. **普通用户** - 想要简单易用的AI工具扩展

### 使用场景
- 🔍 **浏览发现** - "有什么好用的工具？"
- 📊 **对比选择** - "这些工具有什么区别？"  
- ⚡ **快速试用** - "我想试试这个工具"
- 🛠️ **批量管理** - "管理我的工具集合"

## 🏗️ 功能架构

### 核心功能模块

#### 1. 市场源管理
- **多源支持**：官方源、社区源、企业私有源
- **源管理**：添加、删除、启用/禁用市场源
- **信任机制**：可信源标识，安全级别控制
- **优先级**：多源搜索时的结果排序

#### 2. MCP 服务器发现
- **全文搜索**：支持名称、描述、标签搜索
- **分类浏览**：按功能分类（文件系统、网络、AI等）
- **高级筛选**：评分、安装量、更新时间等
- **搜索范围**：全部市场、指定市场源

#### 3. 包详情展示
- **基本信息**：名称、版本、作者、评分、安装量
- **功能说明**：README、使用示例、API文档
- **技术信息**：工具列表、依赖要求、环境配置
- **社区互动**：评价反馈、问题链接、更新日志

#### 4. 一键安装部署
- **智能安装**：自动检测依赖和环境要求
- **工作区选择**：安装到指定workspace或创建新的
- **进度反馈**：实时显示安装进度和状态
- **错误处理**：安装失败时的诊断和重试

#### 5. 已安装管理
- **状态监控**：运行状态、资源使用、健康检查
- **版本管理**：更新提醒、版本回滚、兼容性检查
- **批量操作**：批量启停、更新、卸载

## 📱 界面设计

### 页面架构
```
MCP Gateway
├── Dashboard          # 现有：总览仪表板
├── Workspaces         # 现有：工作区管理  
├── Services           # 现有：服务管理
├── Market            # 🆕：市场浏览
├── Installed         # 🆕：已安装包管理
├── Sessions          # 现有：会话管理
├── API Debug         # 现有：API调试
└── Settings          # 现有：系统设置
    └── Market Sources # 🆕：市场源管理
```

### 关键页面设计

#### Market 页面 (市场浏览)
```
┌─────────────── Header ───────────────┐
│ 🔍 搜索框: "搜索MCP服务器..."        │
│ [所有市场 ▼] [分类筛选] [高级筛选]    │
├─────────────────────────────────────┤
│┌─ 筛选侧边栏 ─┐┌─── 主内容区域 ────┐│
││ 🌐 市场源选择 ││ 📦 搜索结果: 45个 ││
││ ☑️ 官方市场  ││ ┌─────┐ ┌─────┐ ││  
││ ☑️ 社区市场  ││ │工具A│ │工具B│ ││
││ ☑️ 企业源    ││ │⭐4.8│ │⭐4.5│ ││
││             ││ │📊2.1k│ │📊856│ ││
││ 📂 功能分类   ││ └─────┘ └─────┘ ││
││ 🗂️ 文件系统  ││                 ││
││ 🌐 网络工具   ││ [加载更多...]    ││
││ 📊 数据处理   ││                 ││
│└─────────────┘└─────────────────┘│
└─────────────────────────────────────┘
```

#### Package Detail 页面 (包详情)
```
┌─────────── 包信息头部 ──────────┐
│ 📦 filesystem-tools v1.2.0      │
│ 👤 by example-dev               │  
│ ⭐ 4.8 (156 reviews) 📊 2.1k 安装│
│ 🏷️ filesystem files productivity │
│ [安装到 workspace ▼] [⭐收藏]    │
├─────────────────────────────────┤
│ 📖 README.md                    │
│ ├─ 功能介绍                      │
│ ├─ 安装说明                      │
│ ├─ 使用示例                      │
│ └─ 配置参数                      │
├─────────────────────────────────┤  
│ 🛠️ 技术信息                     │
│ ├─ 提供工具: read_file, write_file│
│ ├─ 依赖要求: Python 3.8+        │
│ ├─ 环境变量: FILESYSTEM_ROOT     │
│ └─ 兼容版本: MCP v1.0+          │
├─────────────────────────────────┤
│ 💬 社区 & 支持                   │
│ ├─ 🔗 GitHub Repository         │
│ ├─ 🐛 问题反馈                   │
│ └─ 📝 更新日志                   │
└─────────────────────────────────┘
```

#### Settings > Market Sources 页面
```
┌─────── 市场源管理 ────────┐
│ [+ 添加新的市场源]         │
├─────────────────────────┤
│ 📦 官方源                │
│ 🔗 https://registry.mcp.dev │
│ ✅ 已信任 🟢 已启用       │
│ [编辑] [禁用]            │
├─────────────────────────┤  
│ 🌐 社区源                │
│ 🔗 https://github.com/... │
│ ⚠️  未验证 🟢 已启用      │
│ [编辑] [禁用] [验证]      │
├─────────────────────────┤
│ 🏢 企业源                │
│ 🔗 https://internal.corp.com │
│ 🔒 私有 🟢 已启用         │
│ [编辑] [禁用]            │
└─────────────────────────┘
```

## 🔧 技术架构

### 前端技术栈 (复用现有)
- **React 19 + TypeScript** - 现代化前端框架
- **Material-UI 6.2** - UI组件库
- **React Router 7.1** - 路由管理
- **Axios 1.7** - HTTP客户端

### 后端 API 设计
详细的API规范请参考：[MCP Market API 详细规范](./mcp-market-api-specifications.md)

**核心API概览**：
- 市场源管理：添加、删除、同步市场源
- 包搜索发现：全文搜索、分类筛选、排序  
- 包详情获取：README、版本、安装规范
- 安装管理：一键安装、状态监控、批量操作
- 统计监控：使用统计、健康检查

### 数据模型

#### MarketSource (市场源)
```go
type MarketSource struct {
    ID       string `json:"id"`
    Name     string `json:"name"`
    URL      string `json:"url"`  
    Trusted  bool   `json:"trusted"`
    Enabled  bool   `json:"enabled"`
    Priority int    `json:"priority"`
}
```

#### MCPPackage (MCP包)
```go
type MCPPackage struct {
    ID          string            `json:"id"`
    Name        string            `json:"name"`
    Version     string            `json:"version"`
    Description string            `json:"description"`
    Author      string            `json:"author"`
    Tags        []string          `json:"tags"`
    Repository  string            `json:"repository"`
    License     string            `json:"license"`
    Rating      float64           `json:"rating"`
    Downloads   int64             `json:"downloads"`
    InstallSpec InstallSpec       `json:"install"`
    Tools       []string          `json:"tools"`
    Resources   []string          `json:"resources"`
    README      string            `json:"readme"`
    Verified    bool              `json:"verified"`
}

type InstallSpec struct {
    Type    string            `json:"type"`    // "uvx", "npm", "docker", "url"
    Command string            `json:"command"`
    Args    []string          `json:"args"`
    Env     map[string]string `json:"env"`
}
```

## 🚀 开发计划

### Phase 1: MVP 核心功能 (2-3周)
- [x] 产品设计文档
- [ ] 后端市场源管理API
- [ ] 前端市场浏览页面  
- [ ] 基础搜索和筛选功能
- [ ] 包详情展示页面
- [ ] 一键安装功能

### Phase 2: 完善功能 (2-3周) 
- [ ] 已安装包管理页面
- [ ] 版本更新和回滚
- [ ] 批量操作功能
- [ ] 安装进度和错误处理
- [ ] 市场源管理界面

### Phase 3: 生态功能 (3-4周)
- [ ] 包依赖解析和管理
- [ ] 安全扫描和验证
- [ ] 社区评价和反馈系统
- [ ] 安装统计和分析
- [ ] 官方市场源建设

### Phase 4: 高级功能 (可选)
- [ ] 包版本兼容性检查  
- [ ] 自动更新和通知
- [ ] 企业私有市场支持
- [ ] CLI命令行工具
- [ ] 包开发者工具

## 📊 成功指标

### 用户指标
- 市场包使用率：安装的包/总可用包 > 60%
- 安装成功率：成功安装/总安装尝试 > 95%
- 用户留存：使用市场功能的用户月活跃度 > 80%

### 生态指标  
- 市场包数量：6个月内达到50+高质量包
- 社区贡献：月均新增包 > 5个
- 包质量：平均评分 > 4.0星

### 技术指标
- 搜索响应时间：< 500ms
- 安装平均时间：< 2分钟  
- 系统可用性：> 99.5%

## 🔒 风险控制

### 安全风险
- **包源验证**：官方源加密签名，第三方源风险提示
- **代码审查**：可信源的包代码安全扫描
- **隔离运行**：MCP服务运行在隔离环境中

### 质量风险
- **评分系统**：用户评价和自动质量检测
- **版本管理**：语义化版本，向后兼容检查
- **测试覆盖**：核心包提供测试用例和文档

### 运营风险  
- **内容审核**：不当内容的举报和处理机制
- **服务稳定**：多源备份，缓存和容灾机制
- **用户支持**：完善的帮助文档和问题反馈渠道

---

## 附录

### A. 竞品参考
- **VS Code Extensions Marketplace** - UI设计和用户体验
- **Docker Hub** - 容器镜像发现和管理  
- **npm Registry** - 包管理和依赖解析
- **Homebrew** - 命令行工具安装体验

### B. 技术选型说明
选择复用现有前端技术栈的原因：
1. 保持UI/UX一致性，减少用户学习成本
2. 加快开发速度，减少重复工作
3. 便于维护，统一技术栈和代码规范
4. 现有组件已适配响应式和无障碍需求

### C. 未来扩展可能
- AI推荐系统：基于用户使用习惯推荐相关工具
- 包组合套餐：预配置的工具包组合，一键部署完整解决方案  
- 开发者认证：认证开发者和高质量包的信任体系
- 企业版功能：私有市场、审批流程、使用统计等